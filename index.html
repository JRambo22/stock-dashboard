<!DOCTYPE html>
<html>
<head>
  <title>Defensive Stock List</title>
</head>
<body>

  <h2>Defensive Stock List</h2>
  <ul id="stock-list"></ul>

  <script>
    fetch('Defensive%20Stock%20List.csv')  // URL encode spaces as %20
      .then(response => response.text())
      .then(text => {
        const allLines = text.trim().split('\n');
        const lines = allLines.slice(2);  // skip first two heading lines

        // Header row is now lines[0]
        const headers = lines[0].split(',');
        const stockNameIndex = headers.indexOf("Stock Name");

        const stockListElement = document.getElementById('stock-list');

        for(let i = 1; i < lines.length; i++) {
          const row = lines[i].split(',');

          // Defensive: Check if index exists
          if(row.length > stockNameIndex) {
            const stockName = row[stockNameIndex].trim();
            if(stockName) {
              const li = document.createElement('li');
              li.textContent = stockName;
              stockListElement.appendChild(li);
            }
          }
        }
      })
      .catch(error => {
        console.error('Error loading CSV:', error);
      });
  </script>

</body>
</html>
