<!DOCTYPE html>
<html>
<head>
  <title>My Stock List</title>
</head>
<body>

  <h2>List of Stocks</h2>
  <ul id="stock-list"></ul>

  <script>
    fetch('data.csv')
      .then(response => response.text())
      .then(text => {
        // Split all lines, skip first two lines (0 and 1)
        const allLines = text.trim().split('\n');
        const lines = allLines.slice(2); // skip first two rows

        // The new first line is header
        const headers = lines[0].split(',');

        // Find the index of "Stock Name" in header
        const stockNameIndex = headers.indexOf("Stock Name");

        const stockListElement = document.getElementById('stock-list');

        // Loop through rows starting from line 1 (which is the first data row after header)
        for(let i = 1; i < lines.length; i++) {
          const row = lines[i].split(',');

          // Sometimes CSV fields might have commas, so we might want to use a proper CSV parser later, but let's try simple split for now.

          const stockName = row[stockNameIndex] ? row[stockNameIndex].trim() : '';

          if(stockName) {
            const li = document.createElement('li');
            li.textContent = stockName;
            stockListElement.appendChild(li);
          }
        }
      })
      .catch(error => {
        console.error('Error loading CSV:', error);
      });
  </script>

</body>
</html>
